/*!
 DMXzone Bootstrap 5 Theme
 Version: 1.0.0
 (c) 2023 Wappler.io
 @build 2023-11-22 11:45:02
 */
dmx.Component("bs5-theme",{initialData:{theme:"auto"},attributes:{key:{type:String,default:"theme"},theme:{type:String,default:"auto",enum:["auto","light","dark"]}},methods:{setTheme:function(e){this.props.theme=e,this.update()}},render:function(){this._changeHandler=this._changeHandler.bind(this),this._mediaQuery=window.matchMedia("(prefers-color-scheme: dark)"),this._mediaQuery.addEventListener("change",this._changeHandler),this.props.theme=this._getStoredTheme()||this.props.theme,this._update()},beforeDestroy:function(){this._mediaQuery.removeEventListener("change",this._changeHandler)},update:function(){this._setStoredTheme(this.props.theme),this._update()},_update:function(){"auto"===this.props.theme?document.documentElement.setAttribute("data-bs-theme",this._mediaQuery.matches?"dark":"light"):document.documentElement.setAttribute("data-bs-theme",this.props.theme),this.set("theme",this.props.theme)},_changeHandler:function(e){this._update()},_getStoredTheme:function(){return localStorage.getItem(this.props.key)},_setStoredTheme:function(e){localStorage.setItem(this.props.key,e)}}),dmx.Component("bs5-theme-switch",{initialData:{theme:"auto"},attributes:{icons:{type:String,default:"bi",enum:["bi","fa"]},manager:{type:String,default:""}},events:{change:Event},render:function(e){this._icons={bi:{auto:"bi-circle-half",check:"bi-check2",dark:"bi-moon-stars-fill",light:"bi-sun-fill"},fa:{auto:"fa-adjust",check:"fa-check",dark:"fa-moon fa-moon-o",light:"fa-sun fa-sun-o"}},this._prefix=e.id;const t=this._icons[this.props.icons],s=e.classList.contains("nav-item")||e.parentNode.classList.contains("nav-item");e.classList.add("dropdown"),e.innerHTML=`\n      <button class="btn ${s?"btn-link nav-link":"btn-primary"} py-2 dropdown-toggle d-flex align-items-center" id="${this._prefix}-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" aria-label="Toggle theme (auto)">\n        <i class="${this.props.icons} ${t.auto} ${"fa"==this.props.icons?"my-1":""} theme-icon-active"></i>\n        <span class="visually-hidden" id="${this._prefix}-theme-text">Toggle theme</span>\n      </button>\n      <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="${this._prefix}-theme-text">\n        <li>\n          <button type="button" class="dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">\n            <i class="${this.props.icons} ${t.light} me-2 opacity-50"></i>\n            Light\n            <i class="${this.props.icons} ${t.check} ms-auto d-none"></i>\n          </button>\n        </li>\n        <li>\n          <button type="button" class="dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">\n            <i class="${this.props.icons} ${t.dark} me-2 opacity-50"></i>\n            Dark\n            <i class="${this.props.icons} ${t.check} ms-auto d-none"></i>\n          </button>\n        </li>\n        <li>\n          <button type="button" class="dropdown-item d-flex align-items-center" data-bs-theme-value="auto" aria-pressed="true">\n            <i class="${this.props.icons} ${t.auto} me-2 opacity-50"></i>\n            Auto\n            <i class="${this.props.icons} ${t.check} ms-auto d-none"></i>\n          </button>\n        </li>\n      </ul>\n    `,e.querySelectorAll("[data-bs-theme-value]").forEach((t=>{t.addEventListener("click",(()=>{this.set("theme",t.getAttribute("data-bs-theme-value")),this._setTheme(this.data.theme),e.querySelector(`#${this._prefix}-theme`).focus()}))})),this.update()},update:function(e){const t=this._icons[this.props.icons];this.set("theme",dmx.parse(`${this.props.manager}.theme`,this)),this.$node.querySelectorAll("[data-bs-theme-value]").forEach((e=>{e.getAttribute("data-bs-theme-value")===this.data.theme?(e.classList.add("active"),e.setAttribute("aria-pressed","true"),e.querySelector("."+t.check).classList.remove("d-none")):(e.classList.remove("active"),e.setAttribute("aria-pressed","false"),e.querySelector("."+t.check).classList.add("d-none"))}));const s=this.$node.querySelector(".theme-icon-active");Object.values(t).forEach((e=>s.classList.remove.apply(s.classList,e.split(" ")))),s.classList.add.apply(s.classList,t[this.data.theme].split(" "));this.$node.querySelector(`#${this._prefix}-theme`).setAttribute("aria-label",`Toggle theme (${this.data.theme})`)},_setTheme:function(e){this.props.manager&&dmx.parse(`${this.props.manager}.setTheme("${e}")`,this),this.dispatchEvent("change",{},{theme:e})}});
//# sourceMappingURL=dmxBootstrap5Theme.js.map
